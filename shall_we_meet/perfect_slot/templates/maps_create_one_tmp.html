<script>


var mymap = L.map('mapid').setView([52.232079, 21.006311], 9);

L.tileLayer('https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=9f79bff8a5e4496c87bb5f2dc0faff40', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://thunderforest.com/">Thunderforest</a>',
    maxZoom: 18,
}).addTo(mymap);

L.control.scale().addTo(mymap);

var markersLayer = L.markerClusterGroup();

var arcgisOnline = L.esri.Geocoding.arcgisOnlineProvider();

L.esri.Geocoding.geosearch({
providers: [
  arcgisOnline,
  L.esri.Geocoding.mapServiceProvider({
    label: 'States and Counties',
    url: 'https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer',
    layers: [2, 3],
    searchFields: ['NAME', 'STATE_NAME']
  })
]
}).addTo(mymap);

mymap.addLayer(markersLayer);


{#adding marker to map#}
var marker;
mymap.on('click',
    function(addingMarker){
        var coordinates_lat = addingMarker.latlng["lat"];
        var coordinates_lng = addingMarker.latlng["lng"];
        console.log(coordinates_lng, coordinates_lat );
        document.getElementById('id_geographical_coordinates').value = `Point(${coordinates_lng}  ${coordinates_lat})`;
       if (marker) { // check
           mymap.removeLayer(marker); // remove
       }

    marker = new L.marker(addingMarker.latlng, {draggable: true}).addTo(mymap);
    });


</script>